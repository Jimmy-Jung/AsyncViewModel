# Makefile for AsyncViewModel Project
# Tuist ëª…ë ¹ì–´ë¥¼ ê°„í¸í•˜ê²Œ ì‹¤í–‰

.PHONY: help install generate build test clean graph edit setup open test-all test-core test-macros

# ê¸°ë³¸ íƒ€ê²Ÿ
help:
	@echo "AsyncViewModel Tuist Project Makefile"
	@echo ""
	@echo "ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´:"
	@echo "  make install     - ì™¸ë¶€ ì˜ì¡´ì„± ì„¤ì¹˜"
	@echo "  make generate    - Xcode í”„ë¡œì íŠ¸ ìƒì„±"
	@echo "  make build       - í”„ë¡œì íŠ¸ ë¹Œë“œ"
	@echo "  make test        - Example í…ŒìŠ¤íŠ¸ ì‹¤í–‰"
	@echo "  make test-all    - ëª¨ë“  íŒ¨í‚¤ì§€ í…ŒìŠ¤íŠ¸ (Core + Macros + Example)"
	@echo "  make test-core   - AsyncViewModel Core í…ŒìŠ¤íŠ¸"
	@echo "  make test-macros - AsyncViewModelMacros í…ŒìŠ¤íŠ¸"
	@echo "  make clean       - ìƒì„±ëœ íŒŒì¼ ì •ë¦¬"
	@echo "  make graph       - ì˜ì¡´ì„± ê·¸ë˜í”„ ì‹œê°í™”"
	@echo "  make edit        - ë§¤ë‹ˆí˜ìŠ¤íŠ¸ íŒŒì¼ í¸ì§‘"
	@echo "  make setup       - ìµœì´ˆ ì„¤ì • (install + generate + open)"
	@echo "  make open        - Xcodeì—ì„œ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì—´ê¸°"

# ì™¸ë¶€ ì˜ì¡´ì„± ì„¤ì¹˜
install:
	@echo "ğŸ“¦ ì™¸ë¶€ ì˜ì¡´ì„± ì„¤ì¹˜ ì¤‘..."
	tuist install

# Xcode í”„ë¡œì íŠ¸ ìƒì„±
generate:
	@echo "ğŸ”¨ Xcode í”„ë¡œì íŠ¸ ìƒì„± ì¤‘..."
	tuist generate

# ë¹Œë“œ
build:
	@echo "ğŸ—ï¸  ë¹Œë“œ ì¤‘..."
	tuist build

# í…ŒìŠ¤íŠ¸
test:
	@echo "ğŸ§ª Example í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘..."
	tuist test

# AsyncViewModel Core í…ŒìŠ¤íŠ¸
test-core:
	@echo "ğŸ§ª AsyncViewModel Core í…ŒìŠ¤íŠ¸ ì¤‘..."
	@cd ../AsyncViewModel && swift test

# AsyncViewModelMacros í…ŒìŠ¤íŠ¸  
test-macros:
	@echo "ğŸ§ª AsyncViewModelMacros í…ŒìŠ¤íŠ¸ ì¤‘..."
	@cd ../AsyncViewModelMacros && swift test

# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
test-all:
	@echo "ğŸ§ª ëª¨ë“  íŒ¨í‚¤ì§€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì¤‘..."
	@echo ""
	@echo "ğŸ“¦ 1/3: AsyncViewModel Core í…ŒìŠ¤íŠ¸..."
	@cd ../AsyncViewModel && swift test
	@echo ""
	@echo "ğŸ“¦ 2/3: AsyncViewModelMacros í…ŒìŠ¤íŠ¸..."
	@cd ../AsyncViewModelMacros && swift test
	@echo ""
	@echo "ğŸ“¦ 3/3: Example í…ŒìŠ¤íŠ¸..."
	tuist test
	@echo ""
	@echo "âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ!"

# ì •ë¦¬
clean:
	@echo "ğŸ§¹ ì •ë¦¬ ì¤‘..."
	tuist clean
	rm -rf *.xcodeproj
	rm -rf *.xcworkspace
	rm -rf .tuist-cache
	rm -rf Derived

# ì˜ì¡´ì„± ê·¸ë˜í”„
graph:
	@echo "ğŸ“Š ì˜ì¡´ì„± ê·¸ë˜í”„ ìƒì„± ì¤‘..."
	tuist graph --format png
	@echo "graph.png íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤."

# ë§¤ë‹ˆí˜ìŠ¤íŠ¸ í¸ì§‘
edit:
	@echo "âœï¸  ë§¤ë‹ˆí˜ìŠ¤íŠ¸ í¸ì§‘ ëª¨ë“œ..."
	tuist edit

# Xcode ì—´ê¸°
open:
	@echo "ğŸš€ Xcodeì—ì„œ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì—´ê¸°..."
	open AsyncViewModel.xcworkspace

# ìµœì´ˆ ì„¤ì •
setup: install generate
	@echo "âœ… ì„¤ì • ì™„ë£Œ!"
	@echo ""
	@echo "ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ Xcodeë¥¼ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:"
	@echo "  make open"
	@echo ""
	@echo "ë˜ëŠ” ì§ì ‘:"
	@echo "  open AsyncViewModel.xcworkspace"

# ì „ì²´ ì •ë¦¬ í›„ ì¬ìƒì„±
reset: clean setup
	@echo "ğŸ”„ í”„ë¡œì íŠ¸ê°€ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤."
